(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1318],{42259:function(e){var t;t=function(){var e=function(){function t(e){return l.appendChild(e.dom),e}function r(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?"block":"none";n=e}var n=0,l=document.createElement("div");l.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",l.addEventListener("click",function(e){e.preventDefault(),r(++n%l.children.length)},!1);var a=(performance||Date).now(),o=a,i=0,s=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:l,addPanel:t,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){i++;var e=(performance||Date).now();if(c.update(e-a,200),e>o+1e3&&(s.update(1e3*i/(e-o),100),o=e,i=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:l,setMode:r}};return e.Panel=function(e,t,r){var n=1/0,l=0,a=Math.round,o=a(window.devicePixelRatio||1),i=80*o,s=48*o,c=3*o,u=2*o,d=3*o,f=15*o,p=74*o,m=30*o,h=document.createElement("canvas");h.width=i,h.height=s,h.style.cssText="width:80px;height:48px";var v=h.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=r,v.fillRect(0,0,i,s),v.fillStyle=t,v.fillText(e,c,u),v.fillRect(d,f,p,m),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(d,f,p,m),{dom:h,update:function(s,x){n=Math.min(n,s),l=Math.max(l,s),v.fillStyle=r,v.globalAlpha=1,v.fillRect(0,0,i,f),v.fillStyle=t,v.fillText(a(s)+" "+e+" ("+a(n)+"-"+a(l)+")",c,u),v.drawImage(h,d+o,f,p-o,m,d,f,p-o,m),v.fillRect(d+p-o,f,o,m),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(d+p-o,f,o,a((1-s/x)*m))}}},e},e.exports=t()},41318:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>es});var n=r(69797),l=r(71993),a=r(15791),o=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&f(e,r,t[r]);return e},m=(e,t)=>i(e,s(t));function h(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}let v=h(a.createContext(null));class x extends a.Component{render(){return a.createElement(v.Provider,{value:this._reactInternals},this.props.children)}}let{ReactCurrentOwner:g,ReactCurrentDispatcher:b}=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var w=r(96022);let y={click:["onClick",!1],pointerup:["onPointerUp",!0],pointerdown:["onPointerDown",!0],pointermove:["onPointerMove",!0]},j={connected:!1,connect(e,t){var r,n,l;null==(n=(r=t.events).disconnect)||n.call(r,e,t);let{handleEvent:a}=(0,w.nj)(t);for(let r in t.events.handlers=Object.entries(y).reduce((e,[t,[r]])=>({...e,[t]:e=>a(e,r)}),{}),y){let n=null==(l=t.events.handlers)?void 0:l[r];if(n){let[,t]=y[r];e.addEventListener(r,n,{passive:t})}}t.events.connected=!0},disconnect(e,t){var r;for(let n in y){let l=null==(r=t.events.handlers)?void 0:r[n];l&&e.removeEventListener(n,l)}t.events.connected=!1}};var S=r(26558),C=r(98625),E=r(22948),R=r(2643);let k=a.forwardRef(function(e,t){let{resize:r,children:l,style:o,renderer:i,dpr:s,camera:c,orthographic:u,frameloop:d,events:f=j,onCreated:y,gl:k,...M}=e,P=function(){let e=function(){var e,t;let r=function(){let e=a.useContext(v);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=a.useId();return a.useMemo(()=>{for(let r of[null==g?void 0:g.current,e,null==e?void 0:e.alternate]){if(!r)continue;let e=function e(t,r,n){if(!t)return;if(!0===n(t))return t;let l=r?t.return:t.child;for(;l;){let t=e(l,r,n);if(t)return t;l=r?null:l.sibling}}(r,!1,e=>{let r=e.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(e)return e}},[e,t])}(),[n]=a.useState(()=>new Map);n.clear();let l=r;for(;l;){let r=null==(e=l.type)?void 0:e._context;r&&r!==v&&!n.has(r)&&n.set(r,null==(t=null==b?void 0:b.current)?void 0:t.readContext(h(r))),l=l.return}return n}();return a.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>a.createElement(t,null,a.createElement(r.Provider,m(p({},n),{value:e.get(r)}))),e=>a.createElement(x,p({},e))),[e])}(),O=a.useRef(k.canvas),[_]=a.useState(k.canvas),[z,{width:N,height:A}]=(0,C.Z)({scroll:!0,debounce:{scroll:50,resize:0},...r}),[D,F]=a.useState(!1),[H,I]=a.useState(!1);if(a.useImperativeHandle(t,()=>O.current),D)throw D;if(H)throw H;_&&N>0&&A>0&&E.C5&&(0,S.sY)((0,n.jsx)(P,{children:(0,n.jsx)(w.SV,{set:I,children:(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(w.gO,{set:F}),children:l})})}),_,{size:{width:N,height:A},orthographic:u,frameloop:d,renderer:i,dpr:s,camera:c,events:f,onCreated:y});let V=a.useRef(null);return a.useEffect(()=>{R.f.setState({canvasElement:_})},[_]),a.useEffect(()=>{let e=V.current;if(e)return O.current.style.display="block",e.appendChild(O.current),()=>{(0,S.uy)(O.current)}},[V,k,i]),(0,n.jsx)("div",{...M,ref:e=>{z(e),V.current=e},style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...o}})}),M=a.forwardRef(function(e,t){return(0,n.jsx)(x,{children:(0,n.jsx)(k,{...e,dpr:1,ref:t})})});var P=r(97068);let O=e=>{let{messages:t}=e;return(0,n.jsx)(P.h,{children:(0,n.jsx)("div",{className:"fixed bottom-0 right-0 flex",children:t.map((e,t)=>e&&(0,n.jsxs)("div",{className:"flex items-center h-6 px-2 font-mono text-sm text-white uppercase bg-gray-900 gap-x-2",children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 bg-yellow-400 rounded-full"}),(0,n.jsx)("span",{children:e})]},t))})})};var _=r(57248),z=r(84391),N=r(68696),A=r(18167),D=r(42983);let F=new z.V(l.xR,{aspect:45});F.position.set(0,15,30);let H=()=>{let e="orbit"===(0,R.f)(e=>e.activeCamera),t=(0,a.useMemo)(()=>new N.q(F,{target:new A.A(0,0,0),zoomSpeed:.3,element:l.xR.canvas,rotateSpeed:.1,enabled:!1}),[]);return(0,a.useEffect)(()=>{t.enabled=e},[e]),(0,D.xQ)(e=>{let{size:r}=e,n=r.width/r.height;F.perspective({aspect:n}),t.update()}),(0,n.jsx)("primitive",{dispose:null,object:F})};var I=r(12277);let V=e=>{let{divisions:t,size:r}=e,l=(0,D.Cp)(e=>e.gl),o=(0,a.useMemo)(()=>new I.V(l,{divisions:t,size:r}),[l,t,r]);return(0,n.jsx)("primitive",{object:o})};var L=r(784),T=r(31984),B=r(28027),Q=r(77726);let U="\n  attribute vec3 position;\n\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n\n  void main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",G="\n  precision highp float;\n\n  uniform vec3 uColor;\n\n  void main() {\n    gl_FragColor = vec4(uColor, 1.0);\n  }\n";new Q.$(l.xR,{vertex:U,fragment:G,uniforms:{uColor:{value:null}}});var W=r(31202);let Z=(e,t)=>e.length===t.length&&e.every((e,r)=>e===t[r]),J=e=>{let{near:t,far:r,top:n,bottom:a,left:o,right:i}=e;return new L.Z(l.xR,{position:{size:3,data:new Float32Array([0,0,0,+o,+a,-t,+o,+a,-t,+i,+a,-t,+i,+a,-t,0,0,0,0,0,0,+i,+n,-t,+i,+n,-t,+o,+n,-t,+o,+n,-t,+i,+a,-t,+i,+a,-t,+i,+n,-t,+i,+n,-t,+o,+a,-t,+o,+a,-t,+o,+n,-t,+o,+n,-t,0,0,0,+o,+a,-t,+o,+a,-r,+o,+a,-r,+i,+a,-r,+i,+a,-r,+i,+a,-t,+i,+a,-t,+o,+a,-r,+o,+a,-r,+o,+n,-r,+o,+n,-r,+o,+n,-t,+o,+n,-t,+o,+a,-r,+o,+a,-r,+i,+n,-r,+i,+n,-r,+o,+n,-r,+o,+n,-r,+i,+a,-r,+i,+a,-r,+i,+n,-r,+i,+n,-r,+i,+a,-t,+i,+a,-t,+i,+n,-t,+i,+n,-t,+i,+n,-r,+i,+n,-r,+o,+n,-t])},normal:{size:3,data:new Float32Array([])}})},Y=()=>{let e=(0,a.useRef)(),t=(0,a.useRef)(null),r=(0,W.G)(e=>e.light),o=(0,a.useRef)({position:new A.A,rotation:new T.U,near:0,far:0,top:0,bottom:0,left:0,right:0});(0,D.xQ)(()=>{var n,l,a;(!(!(r.position.distance(o.current.position)>0)&&Z(r.rotation.toArray(),o.current.rotation.toArray()))||r.near!==o.current.near||r.far!==o.current.far||r.top!==o.current.top||r.bottom!==o.current.bottom||r.left!==o.current.left||r.right!==o.current.right)&&(o.current.position.copy(r.position),o.current.rotation.copy(r.rotation),o.current.near=r.near,o.current.far=r.far,o.current.top=r.top,o.current.bottom=r.bottom,o.current.left=r.left,o.current.right=r.right,null===(n=e.current)||void 0===n||n.position.copy(r.position),null===(l=e.current)||void 0===l||l.rotation.copy(r.rotation),null===(a=e.current)||void 0===a||a.updateMatrixWorld(),t.current&&(t.current.geometry=J(r),t.current.updateMatrixWorld(),t.current.updateMatrix()))});let i=(0,a.useMemo)(()=>J(r),[]);return(0,n.jsxs)("transform",{ref:e,children:[(0,n.jsx)("mesh",{ref:t,geometry:i,mode:l.xR.LINES,children:(0,n.jsx)("program",{vertex:U,fragment:G,uniforms:{uColor:{value:new B.I(16711680)}}})}),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("plane",{args:[1,1]}),(0,n.jsx)("normalProgram",{})]})]})};var q=r(42259);let X=new(r.n(q)()),$=()=>((0,a.useEffect)(()=>(X.showPanel(0),document.body.appendChild(X.dom),()=>{document.body.removeChild(X.dom)}),[]),(0,D.xQ)(()=>{X.end(),X.begin()}),(0,n.jsx)(n.Fragment,{}));var K=r(9521),ee=r(84241),et=r(47920),er=r(98675),en=r(37553);let el=["main","orbit","shadow"],ea=()=>{let[e]=(0,_.s)({folder:"Helpers",key:"lightHelper",label:"Light",shortcut:"l",defaultValue:!1}),[t]=(0,_.s)({folder:"Helpers",key:"gridHelper",label:"Grid",shortcut:"g",defaultValue:!1}),[r]=(0,_.s)({folder:"Helpers",key:"showStats",label:"Stats",shortcut:"t",defaultValue:!1}),[l]=(0,_.s)({folder:"Helpers",key:"showDeviceData",label:"Device data",shortcut:"d",defaultValue:!1}),[o,i]=(0,_.s)({folder:"Helpers",key:"showShadowScene",label:"Shadow Scene",shortcut:"shift+s",defaultValue:!1}),s=(0,R.f)(e=>e.activeCamera),[,c]=(0,ee.M4)(()=>({camera:{label:"Camera (C)",value:"main",options:{"Main (M)":"main","Orbit (O)":"orbit","Shadow (S)":"shadow"},onChange:e=>{R.f.setState({activeCamera:e,multiplyCanvas:"main"===e}),i("main"!==e)},transient:!1}}));(0,a.useEffect)(()=>{c({camera:s})},[s]),(0,et.z)([{keys:"c",callback:()=>{let e=el[(el.indexOf(R.f.getState().activeCamera)+1)%el.length];R.f.setState({activeCamera:e})}},{keys:"m",callback:()=>{R.f.setState({activeCamera:"main"})}},{keys:"o",callback:()=>{R.f.setState({activeCamera:"orbit"})}},{keys:"s",callback:()=>{R.f.setState({activeCamera:"shadow"})}}]);let u=(0,en.Fy)(),d=(0,a.useMemo)(()=>JSON.stringify(u,null,3).split("\n"),[u]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{}),e&&(0,n.jsx)(Y,{}),t&&(0,n.jsx)(V,{size:20,divisions:20}),r&&(0,n.jsx)($,{}),o&&(0,n.jsx)(K.g,{}),l&&(0,n.jsx)(er.v,{children:(0,n.jsx)("div",{"data-lenis-prevent":!0,className:"fixed p-4 overflow-y-auto font-mono text-white bg-black/80 left-4 max-w-96 inset-y-4 z-debug",children:d.map((e,t)=>(0,n.jsx)("div",{className:"whitespace-pre",children:e},t))})})]})},eo=()=>{let e=(0,D.Cp)(e=>e.set),t=(0,D.Cp)(e=>e.scene),r=(0,D.Cp)(e=>e.renderer),o=(0,R.f)(e=>e.activeCamera),i=(0,R.f)(e=>e.hasRendered),s=(0,R.f)(e=>e.setHasRendered),c=(0,R.f)(e=>e.glBackground),u=(0,D.Cp)(e=>e.camera),d=(0,W.G)(e=>e.light),f=(0,a.useMemo)(()=>"shadow"===o?d:"orbit"===o?F:u,[o,d,u]);return(0,a.useEffect)(()=>(e(()=>({priority:1})),()=>{e(()=>({priority:0}))}),[]),(0,D.xQ)(()=>{r.gl.scissor(l.em.x,l.em.y,l.em.width,l.em.height),r.gl.clearColor(c.r,c.g,c.b,1),r.render({scene:t,camera:f}),i||s()}),(0,n.jsx)(n.Fragment,{})};var ei=r(86513);let es=()=>{let{isDebug:e,multiplyCanvas:t,hasRendered:r,activeCamera:a}=(0,R.f)();return(0,n.jsxs)("div",{id:"canvas-container",className:(0,ei.Z)("fixed top-0 left-0 w-full h-screen z-canvas opacity-0",t&&"pointer-events-none",r?"opacity-100":"opacity-0",("orbit"===a||"shadow"===a)&&"!z-debug-canvas"),children:[e&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(O,{messages:["Debug Mode"]})}),(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsxs)(M,{camera:l.r8,frameloop:"always",gl:l.xR,renderer:l.ui,children:[(0,n.jsx)("primitive",{dispose:null,object:l.r8,position:[0,0,6.3]}),(0,n.jsx)(eo,{}),(0,n.jsx)(er.X.Out,{}),e&&(0,n.jsx)(ea,{})]})})]})}}}]);